# AI Agent Instructions for LocalStack AWS Proxy Extension

This repo is a LocalStack extension (plugin) that enables a "proxy mode" - proxying requests for certain AWS services (e.g., S3) to the upstream real AWS cloud, while handling the remaining services locally.

You are an AI agent tasked with adding additional functionality or test coverage to this repo.

## General Instructions

* You can assume that the LocalStack container is running locally, with the proxy extension installed and enabled.
* You can assume that test AWS credentials are configured in the shell environment where the AI agent is running.
* Do *not* touch any files outside the working directory (basedir of this file)!
* You can create new files (no need to prompt for confirmation)
* You can make modifications to files (no need to prompt for confirmation)
* You can delete existing files if needed, but only after user confirmation
* You can call different `make` targets (e.g., `make test`) in this repo (no need to prompt for confirmation)
* For each new file created or existing file modified, add a header comment to the file, something like `# Note/disclosure: This file has been (partially or fully) generated by an AI agent.`
* The proxy tests are executed against real AWS and may incur some costs, so rather than executing the entire test suite or entire modules, focus the testing on individual test functions within a module only.
* To format/lint the codebase you can run `make format` and `make lint`

## Testing

The proxy functionality is covered by integration tests in the `tests/` folder, one file for each different AWS service (e.g., SQS, S3, etc).

To add a test, follow the pattern in the existing tests.
It usually involves creating two boto3 clients, one for the LocalStack connection, and one for the real upstream AWS cloud.
We then run API requests with both clients and assert that the results are identical, thereby ensuring that the proxy functionality is working properly.

To run a single test via `pytest` (say, `test_my_logic` in `test_s3.py`), use the following command:
```
TEST_PATH=tests/test_s3.py::test_my_logic make test
```
